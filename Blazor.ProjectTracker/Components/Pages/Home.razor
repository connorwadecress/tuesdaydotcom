@page "/"

<style>
    .table-dark           { width: 100% !important; }   /* hard-enforce 100 % */
    .tag-pill             { display:inline-block; margin-right:4px; padding:2px 6px;
                             border-radius:4px; color:#fff; font-size:0.85em; white-space:nowrap; }
    .project-row          { cursor:pointer; transition:background-color .2s; }
    .project-row:hover    { background:#343a40; }
</style>

<div style="background:#1a1a1a;color:#fff;min-height:100vh;padding:2rem;">
    <div class="d-flex align-items-center justify-content-between mb-4">
        <h1 class="display-4 m-0">My Projects</h1>
        <button class="btn btn-outline-light p-0"
                style="width:38px;height:38px;font-size:1.5rem;line-height:1;"
                title="Add project" @onclick="AddProject">+</button>
    </div>

    <div class="d-flex justify-content-end mb-3">
        <span class="text-secondary">Showing @Projects.Count projects</span>
    </div>

    <table class="table table-dark table-striped w-100">
        <thead>
            <tr>
                <th style="width:30%;">Project Name</th>
                <th style="width:30%;">Tags</th>
                <th style="width:20%;">Status</th>
                <th style="width:20%;">Date</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var p in Projects)
            {
                <RowComponent Title="@p.Title"
                              Tags="@p.Tags"
                              TagColors="@p.TagColors"
                              Status="@p.Status"
                              Date="@p.Date"
                              OnClick="() => OnRowClicked(p)" />
            }
        </tbody>
    </table>
</div>

@code {
    // simple record without TagDto
    public record Project(
        string Title,
        DateTime Date,
        List<string> Tags,
        List<string> TagColors,
        string Status,
        string? Description = null);

    private List<Project> Projects = new();

    protected override void OnInitialized()
    {
        Projects =
        [
            new Project(
                "Smart Home Controller",
                new DateTime(2024, 6, 10),
                new() { "IoT", "Raspberry Pi", "C#" },
                new() { "#2ecc71", "#3498db", "#e67e22" },
                "Completed")
        ];
    }

    private void OnRowClicked(Project p) =>
        Console.WriteLine($"Project clicked: {p.Title}");

    private void AddProject() =>
        Console.WriteLine("Add-project clicked.");
}
